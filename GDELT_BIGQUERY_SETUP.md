# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ GDELT –¥–∞–Ω–Ω—ã—Ö

## ‚è±Ô∏è –í—Ä–µ–º—è: 5-10 –º–∏–Ω—É—Ç
## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: –ë–ï–°–ü–õ–ê–¢–ù–û (1 TB –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü)

---

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud –ø—Ä–æ–µ–∫—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://console.cloud.google.com/

2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤–æ—à–ª–∏)

3. –í –≤–µ—Ä—Ö–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–ª–∏ "Select a project")

4. –ù–∞–∂–º–∏—Ç–µ **"NEW PROJECT"** (–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç)

5. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: **`gdelt-downloader`** (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)

6. –ù–∞–∂–º–∏—Ç–µ **"CREATE"** (–°–æ–∑–¥–∞—Ç—å)

7. **–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞** (10-30 —Å–µ–∫—É–Ω–¥)

---

## –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ BigQuery API

1. –í —Ç–æ–º –∂–µ console.cloud.google.com —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω –≤–∞—à –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
   (–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞)

2. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.cloud.google.com/apis/library/bigquery.googleapis.com

3. –ù–∞–∂–º–∏—Ç–µ **"ENABLE"** (–í–∫–ª—é—á–∏—Ç—å)

4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ API (5-10 —Å–µ–∫—É–Ω–¥)

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–ª–ª–∏–Ω–≥–∞ (–ë–ï–°–ü–õ–ê–¢–ù–û!)

**–í–ê–ñ–ù–û:** Google —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É, –Ω–æ:
- ‚úÖ –ü–µ—Ä–≤—ã–µ 1 TB –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü - –ë–ï–°–ü–õ–ê–¢–ù–û
- ‚úÖ –î–ª—è –Ω–∞—à–∏—Ö –∑–∞–¥–∞—á —ç—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ø–∏—Å–∞–Ω–∏–π –ù–ï –±—É–¥–µ—Ç (–Ω—É–∂–Ω–æ —è–≤–Ω–æ –≤–∫–ª—é—á–∏—Ç—å paid tier)
- ‚úÖ –í—ã –ø–æ–ª—É—á–∏—Ç–µ $300 –∫—Ä–µ–¥–∏—Ç–æ–≤ –Ω–∞ 90 –¥–Ω–µ–π (–±–æ–Ω—É—Å –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–∏–ª–ª–∏–Ω–≥ - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥.**

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.cloud.google.com/billing

2. –ù–∞–∂–º–∏—Ç–µ **"Link a billing account"** –∏–ª–∏ **"Create account"**

3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–∏–º—è, –∞–¥—Ä–µ—Å, –∫–∞—Ä—Ç–∞)

4. –ù–∞–∂–º–∏—Ç–µ **"Start my free trial"** (–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥)

---

## –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ Project ID

1. –í console.cloud.google.com –æ—Ç–∫—Ä–æ–π—Ç–µ **Dashboard** (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Project ID** (–ù–ï Project Name!)
   - –í—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫: `gdelt-downloader-123456`
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞

3. **–°–û–•–†–ê–ù–ò–¢–ï —ç—Ç–æ—Ç ID** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–¢–µ–ø–µ—Ä—å –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /Users/david/bank_news_agent

# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_PROJECT_ID –Ω–∞ –≤–∞—à —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Project ID
export GOOGLE_CLOUD_PROJECT="gdelt-downloader-123456"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
python3 download_gdelt_bigquery.py \
  --start-date 2024-11-13 \
  --end-date 2024-11-13 \
  --language Russian \
  --output-dir gdelt_test \
  --batch-days 1
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä —Å –∑–∞–ø—Ä–æ—Å–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
2. –ù–∞–∂–º–∏—Ç–µ **"Allow"** (–†–∞–∑—Ä–µ—à–∏—Ç—å)
3. –ú–æ–∂–µ—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
4. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## –®–∞–≥ 6: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≥–æ–¥

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É:

```bash
# –í—Å–µ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∑–∞ 2024 –≥–æ–¥
python3 download_gdelt_bigquery.py \
  --start-date 2024-01-01 \
  --end-date 2024-12-31 \
  --language Russian \
  --output-dir gdelt_2024_russian \
  --batch-days 7 \
  --format csv
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:** 10-20 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö:** ~50-100 GB (—Å–∂–∞—Ç—ã–µ CSV —Ñ–∞–π–ª—ã)

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –†–æ—Å—Å–∏–∏
```bash
python3 download_gdelt_bigquery.py \
  --start-date 2024-01-01 \
  --end-date 2024-12-31 \
  --country Russia \
  --output-dir gdelt_2024_russia
```

### –ù–æ–≤–æ—Å—Ç–∏ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
```bash
python3 download_gdelt_bigquery.py \
  --start-date 2024-01-01 \
  --end-date 2024-12-31 \
  --language Russian \
  --keywords "–±–∞–Ω–∫,—Å–∞–Ω–∫—Ü–∏–∏,—Ä—É–±–ª—å,—Ü–±,–∏–ø–æ—Ç–µ–∫–∞" \
  --output-dir gdelt_2024_finance
```

### –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–±–æ–ª—å—à–∏–µ –±–∞—Ç—á–∏)
```bash
python3 download_gdelt_bigquery.py \
  --start-date 2024-01-01 \
  --end-date 2024-12-31 \
  --language Russian \
  --batch-days 30 \
  --output-dir gdelt_2024_fast
```

### –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON
```bash
python3 download_gdelt_bigquery.py \
  --start-date 2024-01-01 \
  --end-date 2024-12-31 \
  --language Russian \
  --format json \
  --output-dir gdelt_2024_json
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–í–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üì¶ –ë–∞—Ç—á #1: 2024-01-01 ‚Üí 2024-01-07
   üîÑ –ó–∞–ø—Ä–∞—à–∏–≤–∞—é –¥–∞–Ω–Ω—ã–µ...
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: 245,832
   üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: gdelt_20240101_20240107.csv (15.2 MB)

üì¶ –ë–∞—Ç—á #2: 2024-01-08 ‚Üí 2024-01-14
   ...
```

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Access Denied: User does not have permission"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_CLOUD_PROJECT`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ BigQuery API –≤–∫–ª—é—á–µ–Ω –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å OAuth credentials

### "quota exceeded"
- –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç 1 TB/–º–µ—Å—è—Ü
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ –ø–ª–∞—Ç–Ω—ã–π tier

### –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —Å–∫—Ä–∏–ø—Ç—É

---

## –ö—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`--output-dir`):

```
gdelt_2024_russian/
‚îú‚îÄ‚îÄ gdelt_20240101_20240107.csv
‚îú‚îÄ‚îÄ gdelt_20240108_20240114.csv
‚îú‚îÄ‚îÄ gdelt_20240115_20240121.csv
‚îú‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ metadata.json
```

**metadata.json** —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥—Ä—É–∑–∫–µ:
```json
{
  "download_date": "2024-11-14T10:30:00",
  "period": {
    "start": "2024-01-01",
    "end": "2024-12-31"
  },
  "total_rows": 5234567,
  "file_format": "csv"
}
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö CSV

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `url` | URL —Å—Ç–∞—Ç—å–∏ |
| `title` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ |
| `seendate` | –î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è |
| `socialimage` | URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–æ—Ü.—Å–µ—Ç–µ–π |
| `domain` | –î–æ–º–µ–Ω –∏—Å—Ç–æ—á–Ω–∏–∫–∞ |
| `language` | –Ø–∑—ã–∫ —Å—Ç–∞—Ç—å–∏ |
| `sourcecountry` | –°—Ç—Ä–∞–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ |

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ:

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≤–∞—à—É –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```python
   import pandas as pd
   import sqlite3

   # –ß–∏—Ç–∞–µ–º CSV
   df = pd.read_csv("gdelt_2024_russian/gdelt_20240101_20240107.csv")

   # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ SQLite
   conn = sqlite3.connect("news_database.db")
   df.to_sql("news", conn, if_exists="append", index=False)
   ```

2. **–°–æ–∑–¥–∞—Ç—å embeddings** –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å** —Å –≤–∞—à–∏–º news agent —Å–µ—Ä–≤–∏—Å–æ–º

---

## –°–ø—Ä–∞–≤–∫–∞

```bash
# –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
python3 download_gdelt_bigquery.py --help

# –í–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫
pip list | grep -E "pandas-gbq|google-cloud-bigquery"
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å `--batch-days 1` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞—Ç—á)

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º GDELT —á–µ—Ä–µ–∑ BigQuery! üéâ
